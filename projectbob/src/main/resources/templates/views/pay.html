<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layouts/main_layout}">
<head>
<title>결제하기</title>
</head>
<body>
	<div layout:fragment="content">
		<div class="container my-4">
			<div class="row">
				<!-- 왼쪽 입력 영역 -->
				<div class="col-md-8">
					<div class="section-title">결제하기</div>
					<div class="mb-3">
						<label class="form-label">주소</label>
						 <input type="text" name="address1" class="form-control"
						 	th:value="${member != null ? member.address1 : ''}"
							 placeholder="(필수)주소를 입력하세연" />
						<input type="text" class="form-control mt-2" name="address2"
							th:value="${member != null ? member.address2 : ''}"
							placeholder="(필수) 상세주소 입력" />
					</div>
					<div class="mb-3">
						<label class="form-label">휴대전화번호</label> <input type="text"
							class="form-control" placeholder="(필수) 휴대전화 번호 입력" />
						<div class="form-check mt-2">
							<input class="form-check-input" type="checkbox" id="safeNum" />
							<label class="form-check-label" for="safeNum">안심번호 사용</label>
						</div>
					</div>
					<div class="mb-3">
						<label class="form-label">주문시 요청사항</label>
						<textarea class="form-control" rows="3" maxlength="100"
							placeholder="예: 배달 시 초인종 누르지 말아주세요."></textarea>
					</div>
					<div class="section-title">결제수단 선택</div>
					<div class="row g-2">
						<div class="col-md-6">
							<button class="btn btn-outline-secondary w-100">신용카드</button>
						</div>
						<div class="col-md-6">
							<button class="btn btn-outline-secondary w-100">휴대폰</button>
						</div>
						<div class="col-md-6">
							<button class="btn btn-outline-success w-100">네이버페이</button>
						</div>
						<div class="col-md-6">
							<button class="btn btn-outline-warning w-100">카카오페이</button>
						</div>
					</div>
					<div class="mt-4">
						<label class="form-label">할인 쿠폰</label>
						<div class="input-group">
							<input type="text" class="form-control" placeholder="쿠폰 코드 입력" />
							<button class="btn btn-outline-danger">적용</button>
						</div>
					</div>
				</div>

				<!-- 주문표 -->
				<div class="col-md-4">
					<div class="card order-summary p-3">
						<h5 class="card-title">🛒 주문표</h5>
<form id="orderForm" method="post" action="/pay">
	<!-- <div>
		<div>메뉴ID: <span th:text="${menuId}"></span></div>
		<div>수량: <span th:text="${count}"></span></div>
		<div>옵션ID: <span th:text="${optionIds}"></span></div>		
		<div>총가격: <span th:text="${totalPrice}"></span></div>
	</div> -->
	<input type="hidden" name="menuId" th:value="${menuId}">
	<input type="hidden" name="count" th:value="${count}">
	<input type="hidden" name="optionIds" th:value="${optionIds}">
	<input type="hidden" name="totalPrice" th:value="${totalPrice}">

						<div class="order-item-list mb-3">
							<!-- 주문 메뉴 및 추가 메뉴가 여기 동적으로 들어갑니다 -->
						
						
						<div class="fw-bold">
						<span th:text="'메뉴ID: ' + ${menuId}"></span>
						x <span th:text="${count}"></span>
						(<span th:text="${totalPrice}"></span>원)
						</div>
						<div th:if="${optionIds != null && optionIds != ''}">
							옵션 ID: <span th:text="${optionIds}"></span>
						</div>
						<div th:if="${optionIds == null || optionIds == ''}" class="text-muted fst-italic ms-3">
							추가 메뉴 없음
						</div>
						</div>
						<p>
							총 가격: <strong id="totalPrice">[[${totalPrice}]]원</strong><br /> <small>

								class="text-muted">(배달비 포함)</small>
						</p>

						<!-- 수량 조절 영역 -->
						<div class="qty-control d-flex flex-row align-items-center mb-3">
							<button class="btn btn-outline-secondary btn-qty"
								onclick="minus()">−</button>
							<span id="itemCount" class="mx-3">0</span>
							<button class="btn btn-outline-secondary btn-qty"
								onclick="plus()">＋</button>
						</div>

						<!-- 주문 초기화(삭제) 버튼 -->
						<button class="btn btn-danger w-100 mb-2" id="btnRemoveItem">주문
							취소</button>

						<button type="submit" class="btn text-white w-100" 
							style="background-color: #43d091;" id="btnOrderNow">
							주문하기
							</button>
</form>
					</div>
				</div>

			</div>
		</div>
	</div>
	<script src="/js/main.js"></script>
</body>
</html>
