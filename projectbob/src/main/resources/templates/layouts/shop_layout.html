<!DOCTYPE html>
<html lang="ko" 
		xmlns:th="http://www.thymeleaf.org"
		xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<head>
    <meta charset="UTF-8">
    <title>Project BoB</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="/css/shopLayout.css">
    <link rel="stylesheet" href="/css/shopInfo.css">
    <script th:src="@{js/jquery-3.7.1.min.js}"></script>
    <script th:src="@{js/shop.js}"></script>
    
</head>
<body>
    <div class="layout-wrapper">
    <!-- 헤더 fragment include -->
    	<th:block th:replace="~{fragments/shopHeader :: shopHeader}" />
	
    <div class="container-fluid">
	    <div class="d-flex flex-row">
	      <!-- 사이드바 -->
	      <aside class="services-sidebar me-4">
	        <!-- 사이드바: 가게 드롭다운 -->
			<div th:if="${shopListMain == null or #lists.isEmpty(shopListMain)}">
			  <button class="sidebar-menu-btn d-flex justify-content-between align-items-center">
			    아직 가게가 없습니다.
			  </button>
			</div>
			
			<div th:if="${shopListMain != null and !#lists.isEmpty(shopListMain)}" class="dropdown">
			  <button class="sidebar-menu-btn d-flex justify-content-between align-items-center dropdown-toggle w-100"
				        type="button" id="shopDropdownBtn" data-bs-toggle="dropdown" aria-expanded="false">
				  <span th:text="${currentShop != null ? currentShop.name : shopListMain[0].name}">선택된 가게명</span>
				  <i class="bi bi-chevron-down"></i>
				</button>
				<ul class="dropdown-menu" aria-labelledby="shopDropdownBtn">
				  <li th:each="shop : ${shopListMain}">
				    <a class="dropdown-item"
				       th:href="@{|/shopListMain?s_id=${shop.sId}|}"
				       th:text="${shop.name}">가게이름</a>
				       
				  </li>
				</ul>
			</div>

        <!-- 아이콘 메뉴 리스트 -->
        <div class="sidebar-icon-list mb-3 mt-2">
          <div class="row g-2">
            <div class="col-4">
              <a href="/orders" class="card text-center py-3 border-0 bg-light">
                <i class="bi bi-receipt" style="font-size:1.8rem; color:#14b199;"></i>
                <div style="font-size:13px;">주문내역</div>
              </a>
            </div>
            <div class="col-4">
              <a href="/settlement" class="card text-center py-3 border-0 bg-light">
                <i class="bi bi-coin" style="font-size:1.8rem; color:#2dbe60;"></i>
                <div style="font-size:13px;">정산/세금</div>
              </a>
            </div>
            <div class="col-4">
              <a href="/order-pc" class="card text-center py-3 border-0 bg-light">
                <i class="bi bi-pc-display" style="font-size:1.8rem; color:#5a6ff1;"></i>
                <div style="font-size:13px;">주문접수PC</div>
              </a>
            </div>
          </div>
        </div>
        
        <!-- 아이콘 메뉴 리스트 아래에 추가 -->
        <div class="sidebar-menu-group mt-3">

	  <!-- 가게 관리 -->
	  <div class="mb-2">
	    <button class="btn w-100 text-start sidebar-group-btn fw-bold" 
	            data-bs-toggle="collapse" data-bs-target="#collapseStore" aria-expanded="false">
	      <i class="bi bi-shop me-2"></i> 가게 관리
	      <i class="bi bi-chevron-down float-end"></i>
	    </button>
	    <div class="collapse" id="collapseStore">
	      <ul class="list-unstyled ps-3 mb-0 sidebar-submenu">
	        <li th:if="${shopListMain != null and !#lists.isEmpty(shopListMain)}">
			  <a class="sidebar-sub-link" th:href="@{|/shopBasicView?s_id=${shopListMain[0].sId}|}">
			    기본설정
			  </a>
			</li>
	        <li><a href="#" class="sidebar-sub-link">사장님 공지</a></li>
	        <li><a href="#" class="sidebar-sub-link">PC 주문접수 관리</a></li>
	        <li><a href="#" class="sidebar-sub-link">사장님 포인트</a></li>
	      </ul>
	    </div>
	  </div>
	
	  <!-- 영업시간관리 -->
	  <div class="mb-2">
	    <button class="btn w-100 text-start sidebar-group-btn fw-bold" 
	            data-bs-toggle="collapse" data-bs-target="#collapseTime" aria-expanded="false">
	      <i class="bi bi-clock-history me-2"></i> 영업시간 관리
	      <i class="bi bi-chevron-down float-end"></i>
	    </button>
	    <div class="collapse" id="collapseTime">
	      <ul class="list-unstyled ps-3 mb-0 sidebar-submenu">
	        <li><a th:href="@{|/shopOpenTime?s_id=${shop.sId}|}" class="sidebar-sub-link">영업시간</a></li>
	        <li><a href="#" class="sidebar-sub-link">휴무일</a></li>
	        <li><a href="#" class="sidebar-sub-link">일시중지</a></li>
	      </ul>
	    </div>
	  </div>
	
	  <!-- 메뉴 관리 -->
	  <div class="mb-2">
	    <button class="btn w-100 text-start sidebar-group-btn fw-bold"
	            data-bs-toggle="collapse" data-bs-target="#collapseMenu" aria-expanded="false">
	      <i class="bi bi-list-check me-2"></i> 메뉴 관리
	      <i class="bi bi-chevron-down float-end"></i>
	    </button>
	    <div class="collapse" id="collapseMenu">
	      <ul class="list-unstyled ps-3 mb-0 sidebar-submenu">
	        <li><a href="/menuJoinForm" class="sidebar-sub-link">메뉴 등록</a></li>
	        <li><a href="#" class="sidebar-sub-link">메뉴 관리</a></li>
	        <li><a href="#" class="sidebar-sub-link">메뉴 품절</a></li>
	      </ul>
	    </div>
	  </div>
	  </div>
	  
		<!-- 할인랭킹 -->
		<div class="mb-2">
		  <button class="btn w-100 text-start sidebar-group-btn fw-bold"
		          data-bs-toggle="collapse" data-bs-target="#collapseDiscount" aria-expanded="false">
		    <i class="bi bi-bar-chart-steps me-2"></i> 할인랭킹
		    <i class="bi bi-chevron-down float-end"></i>
		  </button>
		  <div class="collapse" id="collapseDiscount">
		    <ul class="list-unstyled ps-3 mb-0 sidebar-submenu">
		      <li>
		        <a href="/discount/ranking" class="sidebar-sub-link">
		          할인랭킹 관리 <span class="badge bg-danger ms-1">N</span>
		        </a>
		      </li>
		    </ul>
		  </div>
		</div>
		
		<!-- 리뷰관리 -->
		<div class="mb-2">
		  <button class="btn w-100 text-start sidebar-group-btn fw-bold"
		          data-bs-toggle="collapse" data-bs-target="#collapseReview" aria-expanded="false">
		    <i class="bi bi-chat-dots me-2"></i> 리뷰관리
		    <i class="bi bi-chevron-down float-end"></i>
		  </button>
		  <div class="collapse" id="collapseReview">
		    <ul class="list-unstyled ps-3 mb-0 sidebar-submenu">
		      <li><a href="/review/manage" class="sidebar-sub-link">리뷰 관리</a></li>
		      <li><a href="/review/answer" class="sidebar-sub-link">답글 관리</a></li>
		    </ul>
		  </div>
		</div>
		
		<!-- 광고/이벤트 -->
		<div class="mb-2">
		  <button class="btn w-100 text-start sidebar-group-btn fw-bold"
		          data-bs-toggle="collapse" data-bs-target="#collapseAds" aria-expanded="false">
		    <i class="bi bi-megaphone me-2"></i> 광고/이벤트
		    <i class="bi bi-chevron-down float-end"></i>
		  </button>
		  <div class="collapse" id="collapseAds">
		    <ul class="list-unstyled ps-3 mb-0 sidebar-submenu">
		      <li><a href="/ads/manage" class="sidebar-sub-link">광고관리</a></li>
		      <li><a href="/ads/event" class="sidebar-sub-link">이벤트관리</a></li>
		      <li><a href="/ads/coupon" class="sidebar-sub-link">쿠폰관리</a></li>
		    </ul>
		  </div>
		</div>
		
		<!-- 통계 -->
		<div class="mb-2">
		  <button class="btn w-100 text-start sidebar-group-btn fw-bold"
		          data-bs-toggle="collapse" data-bs-target="#collapseStatMenu" aria-expanded="false">
		    <i class="bi bi-graph-up-arrow me-2"></i> 통계
		    <i class="bi bi-chevron-down float-end"></i>
		  </button>
		  <div class="collapse" id="collapseStatMenu">
		    <ul class="list-unstyled ps-3 mb-0 sidebar-submenu">
		      <li><a href="/stat/order" class="sidebar-sub-link">주문통계</a></li>
		      <li><a href="/stat/review" class="sidebar-sub-link">리뷰통계</a></li>
		      <li><a href="/stat/sales" class="sidebar-sub-link">매출통계</a></li>
		    </ul>
		  </div>
		</div>
		
		<!-- 환경설정 -->
		<div class="mb-2">
		  <button class="btn w-100 text-start sidebar-group-btn fw-bold"
		          data-bs-toggle="collapse" data-bs-target="#collapseSetting" aria-expanded="false">
		    <i class="bi bi-gear me-2"></i> 환경설정
		    <i class="bi bi-chevron-down float-end"></i>
		  </button>
		  <div class="collapse" id="collapseSetting">
		    <ul class="list-unstyled ps-3 mb-0 sidebar-submenu">
		      <li><a href="/setting/policy" class="sidebar-sub-link">약관관리</a></li>
		      <li><a href="/setting/faq" class="sidebar-sub-link">FAQ</a></li>
		      <li><a href="/setting/notice" class="sidebar-sub-link">공지사항</a></li>
		      <li><a href="/setting/profile" class="sidebar-sub-link">프로필설정</a></li>
		    </ul>
		  </div>
		</div>
	  
		<!-- 하단 공지부분 -->
         <div class="sidebar-alert mb-3 mt-2">
           <div class="sidebar-link mb-2 text-muted">셀프서비스 홈</div>
           <div class="sidebar-link mb-2 text-muted">승인알림</div>
           <div class="sidebar-link mb-2 text-muted">공지사항</div>
       </aside>
       
	      <!-- 본문 -->
	      <div class="main-content-outer">
			  <div class="content-card">
			    <main layout:fragment="content">
			      <!-- 자식 뷰 페이지의 본문이 들어옴 -->
			    </main>
			  </div>
			</div>
	    </div>
	</div>

    <!-- 푸터 fragment include -->
    <th:block th:replace="~{fragments/shopFooter :: shopFooter}" />

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    </div>
</body>
</html>