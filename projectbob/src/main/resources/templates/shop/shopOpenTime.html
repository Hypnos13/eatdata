<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/shop_layout}">
<head>
    <meta charset="UTF-8">
    <title>영업시간</title>
    <link rel="stylesheet" href="/css/shopInfo.css">
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
</head>
<body>
<div layout:fragment="content">
	<h2 class="text-center fw-bold mb-4">영업시간</h2>
    <form id="openTimeForm" th:action="@{|/shopOpenTimeUpdate?s_id=${shop.sId}|}" method="post" autocomplete="off">
    <div class="text-end me-5">
    	<span th:if="${shop.status == 'Y'}" class="badge bg-success">Open</span>
    	<span th:if="${shop.status != 'Y'}" class="badge bg-secondary">Close</span> 
    	<label class="switch">
    	<input id="shopStat" type="checkbox" th:checked="${shop.status == 'Y'}" th:data-sid="${shop.sId}">
    	<span class="slider"></span>
    	</label>
    </div>
	  <table class="shop-opentime-table table align-middle">
	    <thead>
	      <tr>
	        <th>요일</th>
	        <th>시작시간</th>
	        <th>종료시간</th>
	        <th>휴무</th>
	      </tr>
	    </thead>
	    <tbody>
	      <tr th:each="day, i : ${daysOfWeek}">
  			<td th:text="${day} + '요일'"></td>
	        <!-- 시작시간 -->
			  <td>
			    <div class="d-flex align-items-center time-group">
			      <select th:name="openHour" class="hour-select">
			        <option th:each="h : ${#numbers.sequence(0,23)}"
					        th:value="${#numbers.formatInteger(h, 2)}"
					        th:text="${#numbers.formatInteger(h, 2)}"
					        th:selected="${oH[i.index] eq #numbers.formatInteger(h, 2)}"></option>
			      </select>
			      <span class="time-unit">시</span>
			      <select th:name="openMin" class="min-select">
			        <option th:each="m : ${#numbers.sequence(0,59,10)}"
					        th:value="${#numbers.formatInteger(m, 2)}"
					        th:text="${#numbers.formatInteger(m, 2)}"
					        th:selected="${oM[i.index] eq #numbers.formatInteger(m, 2)}"></option>
			      </select>
			      <span class="time-unit">분</span>
			    </div>
			  </td>
	        <!-- 종료시간 -->
			  <td>
			    <div class="d-flex align-items-center time-group">
			      <select th:name="closeHour" class="hour-select">
			        <option th:each="h : ${#numbers.sequence(0,23)}"
					        th:value="${#numbers.formatInteger(h, 2)}"
					        th:text="${#numbers.formatInteger(h, 2)}"
					        th:selected="${cH[i.index] eq #numbers.formatInteger(h, 2)}"></option>
			      </select>
			      <span class="time-unit">시</span>
			      <select th:name="closeMin" class="min-select">
			        <option th:each="m : ${#numbers.sequence(0,59,10)}"
					        th:value="${#numbers.formatInteger(m, 2)}"
					        th:text="${#numbers.formatInteger(m, 2)}"
					        th:selected="${cM[i.index] eq #numbers.formatInteger(m, 2)}"></option>
			      </select>
			      <span class="time-unit">분</span>
			    </div>
			  </td>
	        <!-- 휴무/영업 -->
			  <td>
			    <label class="switch">
			      <input type="hidden" th:name="|isOpen[${i.index}]|" value="0"/>
			      <input type="checkbox"
			             th:name="|isOpen[${i.index}]|"
			             th:id="|isOpen${i.index}|"
			             value="1"
			             th:checked="${isOpenList[i.index] == '1'}"/>
			      <span class="slider"></span>
			    </label>
			    <span th:id="|openLabel${i.index}|"
			          class="ms-2 badge"
			          th:classappend="${isOpenList[i.index] == '1'} ? 'bg-success' : 'bg-secondary'"
			          th:text="${isOpenList[i.index] == '1'} ? '영업일' : '휴무일'"></span>
			  </td>
			</tr>
	  </tbody>
	  </table>
	  <div class="text-center mt-4">
	    <button type="submit" class="btn btn-primary open-time-edit-save px-4 fw-semibold">
	      <i class="bi bi-check2-circle me-1"></i> 변경사항 저장
	    </button>
	  </div>
	</form>
  
</div>
</body>
</html>
